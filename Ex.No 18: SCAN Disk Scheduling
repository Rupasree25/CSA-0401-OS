#include <stdio.h>
#include <stdlib.h>

int main() {
    int n, i, head, dir, size, seek = 0, idx = 0;
    printf("Enter disk size: ");
    scanf("%d", &size);

    printf("Enter number of requests: ");
    scanf("%d", &n);

    int req[n], left[n], right[n];

    printf("Enter request sequence:\n");
    for(i = 0; i < n; i++)
        scanf("%d", &req[i]);

    printf("Enter initial head position: ");
    scanf("%d", &head);

    printf("Enter direction (0=left, 1=right): ");
    scanf("%d", &dir);

    int l = 0, r = 0;

    for(i = 0; i < n; i++) {
        if(req[i] < head) left[l++] = req[i];
        else right[r++] = req[i];
    }

    for(i = 0; i < l - 1; i++)
        for(int j = 0; j < l - i - 1; j++)
            if(left[j] < left[j + 1]) {
                int t = left[j]; left[j] = left[j + 1]; left[j + 1] = t;
            }

    for(i = 0; i < r - 1; i++)
        for(int j = 0; j < r - i - 1; j++)
            if(right[j] > right[j + 1]) {
                int t = right[j]; right[j] = right[j + 1]; right[j + 1] = t;
            }

    printf("\nSeek Sequence: ");

    if(dir == 1) {
        for(i = 0; i < r; i++) {
            seek += abs(head - right[i]);
            head = right[i];
            printf("%d ", head);
        }
        seek += abs(head - (size - 1));
        head = size - 1;
        for(i = 0; i < l; i++) {
            seek += abs(head - left[i]);
            head = left[i];
            printf("%d ", head);
        }
    } else {
        for(i = 0; i < l; i++) {
            seek += abs(head - left[i]);
            head = left[i];
            printf("%d ", head);
        }
        seek += abs(head - 0);
        head = 0;
        for(i = 0; i < r; i++) {
            seek += abs(head - right[i]);
            head = right[i];
            printf("%d ", head);
        }
    }

    printf("\nTotal Seek Time: %d\n", seek);
    return 0;
}
