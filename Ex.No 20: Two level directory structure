#include <stdio.h>
#include <string.h>

struct directory {
    char dname[20];
    char fname[20][20];
    int fcount;
} dir[10];

int main() {
    int n, ch, i, j;
    char d[20], f[20];

    printf("Enter number of directories: ");
    scanf("%d", &n);

    for(i = 0; i < n; i++) {
        printf("Enter directory name: ");
        scanf("%s", dir[i].dname);
        dir[i].fcount = 0;
    }

    while(1) {
        printf("\n1. Create File\n2. Delete File\n3. Search File\n4. Display\n5. Exit\nEnter choice: ");
        scanf("%d", &ch);

        if(ch == 1) {
            printf("Enter directory name: ");
            scanf("%s", d);

            for(i = 0; i < n; i++) {
                if(strcmp(d, dir[i].dname) == 0) {
                    printf("Enter file name: ");
                    scanf("%s", dir[i].fname[dir[i].fcount]);
                    dir[i].fcount++;
                    printf("File created\n");
                    break;
                }
            }
        }

        else if(ch == 2) {
            printf("Enter directory name: ");
            scanf("%s", d);
            printf("Enter file name to delete: ");
            scanf("%s", f);

            for(i = 0; i < n; i++) {
                if(strcmp(d, dir[i].dname) == 0) {
                    int found = 0;
                    for(j = 0; j < dir[i].fcount; j++) {
                        if(strcmp(f, dir[i].fname[j]) == 0) {
                            strcpy(dir[i].fname[j], dir[i].fname[dir[i].fcount-1]);
                            dir[i].fcount--;
                            found = 1;
                            printf("File deleted\n");
                            break;
                        }
                    }
                    if(!found) printf("File not found\n");
                }
            }
        }

        else if(ch == 3) {
            printf("Enter directory name: ");
            scanf("%s", d);
            printf("Enter file name to search: ");
            scanf("%s", f);

            int found = 0;
            for(i = 0; i < n; i++) {
                if(strcmp(d, dir[i].dname) == 0) {
                    for(j = 0; j < dir[i].fcount; j++) {
                        if(strcmp(f, dir[i].fname[j]) == 0) {
                            found = 1;
                            printf("File found\n");
                        }
                    }
                }
            }
            if(!found) printf("File not found\n");
        }

        else if(ch == 4) {
            for(i = 0; i < n; i++) {
                printf("\nDirectory: %s\n", dir[i].dname);
                printf("Files:\n");
                for(j = 0; j < dir[i].fcount; j++) {
                    printf("%s\n", dir[i].fname[j]);
                }
            }
        }

        else if(ch == 5) break;
    }

    return 0;
}
